<%- include(viewDir + "/common/header.ejs") %>

<main>
    <section class="section section--book">
        <div class="container book book--full">
            <div class="book__cover">
                <img src="/images/960x960.png"
                     alt="Okładka"
                >
            </div>
            <div class="book__info">
                <h1 class="book__info__title">
                    <%= book.title %>
                </h1>
                <div class="book__info__author">
                    <span>Autor:</span>
                    <% if (book.authors && Array.isArray(book.authors)) { %>

                        <% for (const author of book.authors) { %>
                            <a href="/author/<%= author.id %>">
                                <%= author.name %> <%= author.surname %>
                            </a>
                        <% } %>
                    <% } %>
                </div>
                <div class="book__info__isbn">
                    <span>ISBN:</span>
                    <%= book.isbn %>
                </div>
            </div>
            <div class="book__description">
                <span class="fw-700 book__description__header">Opis:</span>
                <p>
                    <%= book.description %>
                </p>
            </div>
        </div>
    </section>

    <% if (authorSimilar.length > 0) { %>
        <section class="section section--other-books">
            <div class="container">
                <h2>
                    <% if (book.authors.length > 1){ %>
                        Inne książki tych autorów
                    <% } else { %>
                        Inne książki tego autora
                    <% } %>
                </h2>
                <div class="list list--block">
                    <% for(const book of authorSimilar){ %>
                        <div class="list__item book book--list-item">
                            <img class="book__thumbnail"
                                 src="/images/960x960.png"
                                 alt="Miniatura"
                            >
                            <a class="book__title"
                               href="/book/<%= book.id %>"
                            >
                                <%= book.title %>
                            </a>
                            <% if (book.authors && Array.isArray(book.authors)) { %>

                                <% for (const author of book.authors) { %>
                                    <a class="book__author"
                                       href="/author/<%= author.id %>"
                                    >
                                        <%= author.name %> <%= author.surname %>
                                    </a>
                                <% } %>
                            <% } %>
                        </div>
                    <% } %>
                </div>
            </div>
        </section>
    <% } %>
</main>

<%- include(viewDir + "/common/footer.ejs") %>

